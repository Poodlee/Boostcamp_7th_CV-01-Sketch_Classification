# 태영

## 목표

* 데이터를 보고 가설을 세우고 검증해보기.
* 모델의 성능을 일반화할 수 있는 다양한 기법을 시도해보기.

## 요약

* 데이터 기반 가설 설정 후 검증 과정을 통해 모델 성능 개선 시도.
* GradCAM을 활용하여 모델이 주목하는 이미지 부분을 시각적으로 확인.
* K-fold 및 ensemble 등 성능 일반화 기법을 적용하여 성능 향상을 꾀함.
* 작은 모델에서 실험을 충분히 하지 않고 큰 모델에 적용하여 실험 시간이 부족했던 것이 성능 최적화의 장애물이 됨.


## 자세한 내용

### 모델 개선 방법
* K-fold validation 기법 사용
    
    5-fold로 나눠 교차검증을 진행하였다. 기존에는 train, valid를 8:2로 나눴기에 20%를 학습헤 사용하지 못했었는데, k-fold를 사용하니 fold별로 전체 데이터를 고루 사용할 수 있었다. 덕분에 똑같은 augmentation 기법과 모델에서 5-fold를 적용했을 때 valid set에서 성능이 0.857에서 0.902까지 오르는 유의미한 결과를 확인하였다.
    
* openCV를 이용한 offline augmentation
    
    grayscale의 스케치 데이터라 질감의 표현보다는 선의 표현이 중요하다고 생각하였다. 그래서 opencv를 이용해 canny sovel edge, gassian blur, mopoloy closed, elastic distortion을 주로 이용하였다. 거대 모델을 제외하고는 유의미한 결과를 확인할 수 있었다.
    
* mixed precision
    
    mixed precision option을 trainer에 추가함으로써 GPU VRAM 사용량이 14기가 정도 됬던 모델이 12기가 정도로 메모리 사용량이 줄었으며, 그만큼 학습속도가 빨라졌다.
    
* accumulate_grad batches
    
    accumulate_grad batches option을 추가함으로써 loss의 일반화가 증가하여 성능이 증가하였다.

### 한계 및 아쉬운 점
* 한계
    * 모델 학습에 시간을 너무 소요함
        
        Bottom-to-top 학습을 진행하지 않았다. 어떤 augmentation 기법이 좋은 성능을 보이는지 작은 모델에서 테스트 하고, 큰 모델에 학습을 진행했어야 하는데 그러질 않아 실험을 많이 진행하지 못했다.
        
* 아쉬운점
    * EDA 분석을 좀 더 면밀히 보지 않은 점
        
        제공해준 EDA를 프로젝트 초기에만 확인하고 그 뒤로 확인하지 않았다.
        
    * 대부분의 실험이 몇 개의 augmetation만 바꿔보면서 진행한 점
        
        vstack, hstack, GAN 등 과 같은 다양한 기법을 사용하지 않았다.
        
    * 다양한 모델을 써보지 않은 점
        
        resnext, vit, coatnet만 주로 사용하고 CLIP이나 eva02같은 거대 모델을 사용하지 않았다.
        
    * 여러 competition들의 상위권 기법을 따라해보지 않은 점
        
        competion이 거의 끝나간 시점에 뒤늦게 k-fold + ensemble 기법을 알게되어서 학습하다가 대회가 종료되었다.
        
    * 대회 게시판에 정보를 공유 안한 점
        
        다른 사람에게 잘못된 코드를 공유할까봐 공유를 안했다. 또한 어느 순간 순위를 생각하게 되니까 더 공유를 안한 것 같다.
        
    * Git 협업 방식에 대해 자신감있게 제안 안한 점
        
        git flow branch 전략을 제시를 안헀다. 그랬더니 repository가 정리 안된 느낌이 있어서, 자연스럽게 나도 꼬일까봐 git push를 멈칫하게 된 것 같다.

### 후기 및 교휸
* iteration 줄이기
    
    작은 모델에서 augmentation이나 ensemble 기법을 적용해 빠르게 실험을 한 후, 큰 모델을 사용하며 유의미한 실험을 할 것이다.
    

* 데이터 분석에 집중하기
    
    이번 프로젝트에서는 실제 데이터만 보고 아이디어를 떠올렸는데, 다음 프로젝트에서는 EDA를 중점적으로 보며 아이디어를 떠올릴 것이다. 또한 만들어준 EDA뿐만 직접 다른 그래프를 통해 분석을 해볼 것이다.
    

* 다양한 augmentation 기법과 ansemble 기법 사용하기
    
    프로젝트가 끝나고 공부하게 된 hstack, vstack, stacking을 사용할 것이다.
    
* competition 상위권 기법 똑같이 구현하기
    
    다음에 있을 object detection에서는 무조건 큰 모델보다는 여러 대회에서 좋은 결과를 보인 모델중에 서칭해서 똑같이 구현해볼 것이다.
    

* 대회 게시판에 정보 공유하기
    
    ⇒ 내가 만든 코드를 사람들에게 공유해서 도움을 주기도 하면서, 피드백을 받을 것이다. 순위에 매몰되지 않고 게시판에서 사람들과 소통하며 정보를 공유할 것이다
    
* git flow 전략 사용
    
    팀원들에게 건의해서 기능 단위로 브랜치를 만들어서 관리하고 싶다. 팀원들에게 제안을 해볼 것이다.